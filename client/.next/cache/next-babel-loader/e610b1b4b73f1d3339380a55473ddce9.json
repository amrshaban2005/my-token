{"ast":null,"code":"var _jsxFileName = \"C:\\\\blockchain\\\\ethereum\\\\projects\\\\my-token\\\\client\\\\pages\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport getWeb3 from '../ethereum/getWeb3';\nimport MyToken from \"../ethereum/build/MyToken.json\";\nimport MyTokenSale from \"../ethereum/build/MyTokenSale.json\";\nimport { Button, Form, Input, Message } from 'semantic-ui-react';\nimport Layout from '../components/layout';\n\nclass Home extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      web3: null,\n      accounts: null,\n      account: null,\n      mytokenInstance: null,\n      mytokenSaleInstance: null,\n      tokenPrice: 0,\n      tokenBalance: 0,\n      numberofToken: 1,\n      tokenSold: 0,\n      tokenAvaliable: 750000,\n      errorMessage: '0',\n      loading: false\n    });\n\n    _defineProperty(this, \"componentDidMount\", async () => {\n      try {\n        const web3 = await getWeb3();\n        const accounts = await web3.eth.getAccounts();\n        const networkId = await web3.eth.net.getId();\n        const deployedNetwork1 = MyToken.networks[networkId];\n        const deployedNetwork2 = MyTokenSale.networks[networkId];\n        const mytokenInstance = new web3.eth.Contract(MyToken.abi, deployedNetwork1 && deployedNetwork1.address);\n        const mytokenSaleInstance = new web3.eth.Contract(MyTokenSale.abi, deployedNetwork2 && deployedNetwork2.address);\n        this.setState({\n          web3,\n          accounts,\n          mytokenInstance,\n          mytokenSaleInstance\n        }, this.loadData);\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    _defineProperty(this, \"loadData\", async () => {\n      try {\n        const {\n          mytokenInstance,\n          mytokenSaleInstance,\n          web3\n        } = this.state;\n        let account = await web3.eth.getCoinbase();\n        let tokenPrice = await mytokenSaleInstance.methods.tokenPrice().call();\n        let tokenBalance = await mytokenInstance.methods.balanceOf(account).call();\n        let tokenSold = await mytokenSaleInstance.methods.tokenSold().call();\n        this.setState({\n          tokenPrice,\n          tokenBalance,\n          account,\n          tokenSold\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    _defineProperty(this, \"onSubmit\", async event => {\n      this.setState({\n        errorMessage: '',\n        loading: true\n      });\n      event.preventDefault();\n\n      try {\n        const {\n          mytokenSaleInstance,\n          account\n        } = this.state;\n        await mytokenSaleInstance.methods.buyTokens(this.state.numberofToken).send({\n          from: account,\n          value: this.state.tokenPrice * this.state.numberofToken\n        });\n        this.setState({\n          numberofToken: 1\n        });\n        this.loadData();\n      } catch (error) {\n        this.setState({\n          errorMessage: error.message\n        });\n      }\n\n      this.setState({\n        loading: false\n      });\n    });\n  }\n\n  render() {\n    const web3 = this.state.web3;\n\n    if (!web3) {\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 14\n        }\n      }, \"Loading Web3, accounts, and contract...\");\n    }\n\n    const tokenPrice = web3.utils.fromWei(this.state.tokenPrice.toString(), 'ether');\n    return __jsx(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, __jsx(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, \"My Token ICO SALE\"), __jsx(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    })), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, \"Introducing \\\"My Token\\\" (DAPP)! Token price is  \", tokenPrice, \" Ether. You Currently have \", this.state.tokenBalance, \" MyToken \"), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }), __jsx(Form, {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, __jsx(Input, {\n      focus: true,\n      value: this.state.numberofToken,\n      onChange: event => this.setState({\n        numberofToken: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }), __jsx(Button, {\n      primary: true,\n      loading: this.state.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 15\n      }\n    }, \"Buy Tokens\"), __jsx(Message, {\n      error: true,\n      header: \"Oops!\",\n      content: this.state.errorMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    })), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }), __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 5\n      }\n    }, this.state.tokenSold, \" /tokens sold\"), __jsx(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }), __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, \"Your Account: \", this.state.account))));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["C:/blockchain/ethereum/projects/my-token/client/pages/index.js"],"names":["React","Component","getWeb3","MyToken","MyTokenSale","Button","Form","Input","Message","Layout","Home","web3","accounts","account","mytokenInstance","mytokenSaleInstance","tokenPrice","tokenBalance","numberofToken","tokenSold","tokenAvaliable","errorMessage","loading","eth","getAccounts","networkId","net","getId","deployedNetwork1","networks","deployedNetwork2","Contract","abi","address","setState","loadData","error","console","log","state","getCoinbase","methods","call","balanceOf","event","preventDefault","buyTokens","send","from","value","message","render","utils","fromWei","toString","onSubmit","target"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport getWeb3 from '../ethereum/getWeb3';\nimport MyToken from \"../ethereum/build/MyToken.json\";\nimport MyTokenSale from \"../ethereum/build/MyTokenSale.json\";\nimport { Button, Form, Input, Message } from 'semantic-ui-react';\nimport Layout from '../components/layout';\n\n\n\nclass Home extends Component {\n\n  state = {\n    web3: null,\n    accounts: null,\n    account: null,\n    mytokenInstance: null,\n    mytokenSaleInstance: null,\n    tokenPrice: 0,\n    tokenBalance: 0,\n    numberofToken: 1,\n    tokenSold:0,\n    tokenAvaliable:750000,\n    errorMessage: '0',\n    loading: false\n  }\n\n  componentDidMount = async () => {\n    try {\n      const web3 = await getWeb3();\n      const accounts = await web3.eth.getAccounts();\n      const networkId = await web3.eth.net.getId();\n\n      const deployedNetwork1 = MyToken.networks[networkId];\n      const deployedNetwork2 = MyTokenSale.networks[networkId];\n\n      const mytokenInstance = new web3.eth.Contract(MyToken.abi,\n        deployedNetwork1 && deployedNetwork1.address,\n      );\n      const mytokenSaleInstance = new web3.eth.Contract(MyTokenSale.abi,\n        deployedNetwork2 && deployedNetwork2.address,\n      );\n\n\n      this.setState({ web3, accounts, mytokenInstance, mytokenSaleInstance }, this.loadData);\n    }\n    catch (error) {\n      console.log(error);\n    }\n  }\n\n  loadData = async () => {\n    try {\n      const { mytokenInstance, mytokenSaleInstance, web3 } = this.state;\n\n      let account = await web3.eth.getCoinbase();\n      let tokenPrice = await mytokenSaleInstance.methods.tokenPrice().call();\n      let tokenBalance = await mytokenInstance.methods.balanceOf(account).call();\n      let tokenSold = await mytokenSaleInstance.methods.tokenSold().call();\n      this.setState({ tokenPrice, tokenBalance, account,tokenSold });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  onSubmit = async (event) => {\n    this.setState({ errorMessage: '', loading: true });\n    event.preventDefault();\n    try {\n      const { mytokenSaleInstance, account } = this.state;\n      await mytokenSaleInstance.methods.buyTokens(this.state.numberofToken).send({ from: account, value: this.state.tokenPrice * this.state.numberofToken });\n      this.setState({ numberofToken: 1 });\n      this.loadData();\n    } catch (error) {\n      this.setState({ errorMessage: error.message });\n    }\n    this.setState({ loading: false });\n  }\n\n  render() {\n    const web3 = this.state.web3;\n    if (!web3) {\n      return <div>Loading Web3, accounts, and contract...</div>;\n    }\n    const tokenPrice = web3.utils.fromWei(this.state.tokenPrice.toString(), 'ether');\n    return (\n      <Layout>\n        <div >\n          <div >\n            <h1 >My Token ICO SALE</h1>\n            <hr />\n            <br />\n          </div>\n          <div >\n            <p>Introducing \"My Token\" (DAPP)! Token price is  {tokenPrice} Ether.\n           You Currently have {this.state.tokenBalance} MyToken </p>\n            <br />\n\n            <Form onSubmit={this.onSubmit}>\n\n\n              <Input focus\n                value={this.state.numberofToken}\n                onChange={event => this.setState({ numberofToken: event.target.value })}\n              />\n\n              <Button primary loading={this.state.loading}>Buy Tokens</Button>\n              <Message error header=\"Oops!\" content={this.state.errorMessage} />\n            </Form>\n            <br />\n    <p>{this.state.tokenSold} /tokens sold</p>\n            <hr />\n            <p>Your Account: {this.state.account}</p>\n          </div>\n        </div>\n\n      </Layout>\n    );\n  }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}